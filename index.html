<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>simpleplayï¼ˆè¤‡æ•°éŸ³æºç‰ˆï¼‰</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      font-family: sans-serif;
      background: #f0f0f0;
    }
    button {
      font-size: 1.2rem;
      padding: 0.5em 1em;
      margin: 0.5em;
      cursor: pointer;
    }
    #fileInput {
      display: none; /* ç”»é¢ã«ã¯è¦‹ã›ãªã„ */
    }
    #status {
      font-size: 1rem;
      color: #333;
      margin-top: 1em;
    }
    .volume-control {
      display: flex;
      align-items: center;
      margin-top: 1em;
    }
    .volume-control label {
      margin-right: 0.5em;
    }
    input[type="range"] {
      width: 150px;
    }
  </style>
</head>
<body>
  <button id="loadButton">MP3éŸ³æºã‚’èª­ã¿è¾¼ã‚€ï¼ˆè¤‡æ•°å¯ï¼‰</button>
  <input type="file" id="fileInput" accept="audio/mp3,audio/mpeg" multiple>

  <div class="volume-control">
    <label for="volumeSlider">éŸ³é‡ï¼š</label>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1">
  </div>

  <p id="status">éŸ³æºãŒã¾ã èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>

  <script>
    let audioList = [];
    let currentIndex = 0;
    let isPlaying = false;

    const loadButton = document.getElementById('loadButton');
    const fileInput = document.getElementById('fileInput');
    const statusText = document.getElementById('status');
    const volumeSlider = document.getElementById('volumeSlider');

    // ğŸ“¥ ãƒœã‚¿ãƒ³ã§ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‹ã
    loadButton.addEventListener('click', () => {
      fileInput.click();
    });

    // ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«ãŒé¸æŠã•ã‚ŒãŸã¨ã
    fileInput.addEventListener('change', (e) => {
      const files = Array.from(e.target.files);
      if (files.length > 0) {
        audioList = files.map(file => {
          const url = URL.createObjectURL(file);
          const audio = new Audio(url);
          audio.volume = volumeSlider.value;
          return audio;
        });
        currentIndex = 0;
        statusText.textContent = `${files.length} ä»¶ã®éŸ³æºã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸã€‚å†ç”Ÿå¾…æ©Ÿä¸­ã€‚`;
      }
    });

    // â–¶ å†ç”Ÿå‡¦ç†
    function playSound() {
      if (audioList.length === 0) return;
      if (isPlaying) return;

      const audio = audioList[currentIndex];
      audio.currentTime = 0;
      audio.volume = volumeSlider.value;
      isPlaying = true;
      statusText.textContent = `å†ç”Ÿä¸­ï¼š${currentIndex + 1} / ${audioList.length}`;
      audio.play();

      audio.onended = () => {
        isPlaying = false;
        currentIndex = (currentIndex + 1) % audioList.length;
        statusText.textContent = `å†ç”Ÿå¾…æ©Ÿä¸­ï¼š${currentIndex + 1} / ${audioList.length}`;
      };
    }

    // ğŸ”Š éŸ³é‡èª¿æ•´ï¼ˆã™ã¹ã¦ã®éŸ³æºã«åæ˜ ï¼‰
    volumeSlider.addEventListener('input', () => {
      audioList.forEach(a => a.volume = volumeSlider.value);
    });

    // â¯ ã‚¯ãƒªãƒƒã‚¯ãƒ»ã‚¿ãƒƒãƒ—ãƒ»ã‚­ãƒ¼æŠ¼ä¸‹ã§å†ç”Ÿ
    document.addEventListener('click', playSound);
    document.addEventListener('touchstart', playSound);
    document.addEventListener('keydown', playSound);
  </script>
</body>
</html>
